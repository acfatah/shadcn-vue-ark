{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "use-forward-expose",
  "dependencies": [],
  "registryDependencies": [
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/unref-element.json"
  ],
  "files": [
    {
      "path": "src/composables/useForwardExpose.ts",
      "content": "import type { ComponentPublicInstance } from 'vue'\n\nimport { computed, getCurrentInstance, ref } from 'vue'\n\nimport { unrefElement } from './unrefElement'\n\nfunction isElement(el: any): el is Element {\n  return Object.prototype.hasOwnProperty.call(el, 'nodeName') && typeof el.nodeName === 'string'\n}\n\n/**\n * Forward component's exposed `value`, `props` and `$el`\n *\n * **Attribution to the Radix Vue team**\n *\n * Docs: https://reka-ui.com/docs/utilities/use-forward-expose#useforwardexpose\n *\n * Source: https://github.com/radix-vue/radix-vue/blob/main/packages/radix-vue/src/shared/useForwardExpose.ts\n */\nexport function useForwardExpose() {\n  // biome-ignore lint/style/noNonNullAssertion: intentional\n  const instance = getCurrentInstance()!\n\n  const currentRef = ref<Element | ComponentPublicInstance | null>()\n\n  const currentElement = computed<HTMLElement>(() => {\n    // $el could be text/comment for non-single root normal or text root, thus we retrieve the nextElementSibling\n    // @ts-expect-error ignore ts error\n    return ['#text', '#comment'].includes(currentRef.value?.$el.nodeName)\n      // @ts-expect-error ignore ts error\n      ? currentRef.value?.$el.nextElementSibling\n      // @ts-expect-error ignore ts error\n      : unrefElement(currentRef)\n  })\n\n  // localExpose should only be assigned once else will create infinite loop\n\n  const localExpose: Record<string, any> | null = Object.assign({}, instance.exposed)\n\n  const ret: Record<string, any> = {}\n\n  // retrieve props for current instance\n  for (const key in instance.props) {\n    Object.defineProperty(ret, key, {\n      enumerable: true,\n      configurable: true,\n      get: () => instance.props[key],\n    })\n  }\n\n  // retrieve default exposed value\n  if (Object.keys(localExpose).length > 0) {\n    for (const key in localExpose) {\n      Object.defineProperty(ret, key, {\n        enumerable: true,\n        configurable: true,\n        // biome-ignore lint/style/noNonNullAssertion: intentional\n        get: () => localExpose![key],\n      })\n    }\n  }\n\n  // retrieve original first root element\n  Object.defineProperty(ret, '$el', {\n    enumerable: true,\n    configurable: true,\n    get: () => instance.vnode.el,\n  })\n\n  instance.exposed = ret\n\n  function forwardRef(ref: Element | ComponentPublicInstance | null) {\n    currentRef.value = ref\n\n    if (isElement(ref) || !ref)\n      return\n\n    // retrieve the forwarded element\n    Object.defineProperty(ret, '$el', {\n      enumerable: true,\n      configurable: true,\n      get: () => ref.$el,\n    })\n\n    instance.exposed = ret\n  }\n\n  return { forwardRef, currentRef, currentElement }\n}\n",
      "type": "registry:file",
      "target": "src/composables/useForwardExpose.ts"
    }
  ],
  "type": "registry:file"
}