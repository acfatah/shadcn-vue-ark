{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "tanstack-data-table",
  "title": "TanStack Data Table",
  "description": "Advanced data table block using TanStack Vue Table directly,\nincluding expandable rows and custom column controls.\n\nReferences:\n- TanStack Table: https://tanstack.com/table/latest/docs/framework/vue/vue-table\n- shadcn/ui: https://ui.shadcn.com/docs/components/data-table",
  "dependencies": [
    "@tanstack/vue-table",
    "@vueuse/core",
    "lucide-vue-next"
  ],
  "registryDependencies": [
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/button.json",
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/checkbox.json",
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/data-table.json",
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/dropdown-menu.json",
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/input.json",
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/table.json"
  ],
  "files": [
    {
      "path": "src/blocks/tanstack-data-table/TanStackTable.vue",
      "content": "<script setup lang=\"ts\">\nimport type { Component } from 'vue'\n\nimport {\n  createColumnHelper,\n  FlexRender,\n  getCoreRowModel,\n  getExpandedRowModel,\n  getFilteredRowModel,\n  getPaginationRowModel,\n  getSortedRowModel,\n  useVueTable,\n} from '@tanstack/vue-table'\nimport { ChevronsUpDownIcon } from 'lucide-vue-next'\nimport { h, ref } from 'vue'\n\nimport { Button } from '@/components/ui/button'\nimport { Checkbox } from '@/components/ui/checkbox'\nimport { valueUpdater } from '@/components/ui/data-table'\nimport { DropdownMenu } from '@/components/ui/dropdown-menu'\nimport { Input } from '@/components/ui/input'\nimport { Table } from '@/components/ui/table'\n\nimport type { Payment } from './data/payments'\n\nimport { data } from './data/payments'\nimport DropdownAction from './TanStackTableDropdown.vue'\n\nconst columnHelper = createColumnHelper<Payment>()\n\nconst CheckboxRoot = Checkbox.Root as Component\nconst CheckboxHiddenInput = Checkbox.HiddenInput as Component\nconst CheckboxControl = Checkbox.Control as Component\nconst CheckboxIndicator = Checkbox.Indicator as Component\n\nfunction renderSelectionCheckbox(options: {\n  checked: boolean | 'indeterminate'\n  onUpdate: (value: boolean) => void\n  ariaLabel: string\n}) {\n  return h(CheckboxRoot, {\n    'checked': options.checked,\n    'onUpdate:checked': options.onUpdate,\n    'aria-label': options.ariaLabel,\n    'class': 'items-center justify-center gap-0',\n  }, () => [\n    h(CheckboxHiddenInput),\n    h(CheckboxControl, null, () => h(CheckboxIndicator)),\n  ])\n}\n\nconst columns = [\n  columnHelper.group({\n    id: 'select',\n    header: ({ table }) => renderSelectionCheckbox({\n      checked: table.getIsAllPageRowsSelected()\n        || (table.getIsSomePageRowsSelected() && 'indeterminate'),\n      onUpdate: value => table.toggleAllPageRowsSelected(!!value),\n      ariaLabel: 'Select all',\n    }),\n    cell: ({ row }) => renderSelectionCheckbox({\n      checked: row.getIsSelected(),\n      onUpdate: value => row.toggleSelected(!!value),\n      ariaLabel: 'Select row',\n    }),\n    enableSorting: false,\n    enableHiding: false,\n  }),\n\n  columnHelper.accessor('status', {\n    header: () => 'Status',\n    cell: ({ row }) => h('div', { class: 'capitalize' }, row.getValue('status')),\n  }),\n\n  columnHelper.accessor('email', {\n    header: ({ column }) => {\n      return h(Button, {\n        variant: 'ghost',\n        onClick: () => column.toggleSorting(column.getIsSorted() === 'asc'),\n      }, () => ['Email', h(ChevronsUpDownIcon, { class: 'ml-2 h-4 w-4' })])\n    },\n    cell: ({ row }) => h('div', { class: 'lowercase' }, row.getValue('email')),\n  }),\n\n  columnHelper.accessor('amount', {\n    header: () => h('div', { class: 'text-right' }, 'Amount'),\n    footer: props => props.column.getFacetedUniqueValues().size,\n    cell: ({ row }) => {\n      const amount = Number.parseFloat(row.getValue('amount'))\n\n      const formatted = new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD',\n      }).format(amount)\n\n      return h('div', { class: 'text-right font-medium' }, formatted)\n    },\n  }),\n\n  columnHelper.display({\n    id: 'actions',\n    enableHiding: false,\n    cell: ({ row }) => h('div', { class: 'flex justify-end' }, h(DropdownAction, {\n      payment: row.original,\n      onExpand: row.toggleExpanded,\n    })),\n  }),\n]\n\nconst sorting = ref([])\nconst columnFilters = ref([])\nconst columnVisibility = ref({})\nconst rowSelection = ref({})\nconst expanded = ref({})\n\nconst table = useVueTable({\n  data,\n  columns,\n  getCoreRowModel: getCoreRowModel(),\n  getPaginationRowModel: getPaginationRowModel(),\n  getSortedRowModel: getSortedRowModel(),\n  getFilteredRowModel: getFilteredRowModel(),\n  getExpandedRowModel: getExpandedRowModel(),\n  onSortingChange: updaterOrValue => valueUpdater(updaterOrValue, sorting),\n  onColumnFiltersChange: updaterOrValue => valueUpdater(updaterOrValue, columnFilters),\n  onColumnVisibilityChange: updaterOrValue => valueUpdater(updaterOrValue, columnVisibility),\n  onRowSelectionChange: updaterOrValue => valueUpdater(updaterOrValue, rowSelection),\n  onExpandedChange: updaterOrValue => valueUpdater(updaterOrValue, expanded),\n  state: {\n    get sorting() { return sorting.value },\n    get columnFilters() { return columnFilters.value },\n    get columnVisibility() { return columnVisibility.value },\n    get rowSelection() { return rowSelection.value },\n    get expanded() { return expanded.value },\n  },\n})\n</script>\n\n<template>\n  <div class=\"w-full\">\n    <div class=\"flex items-center py-4\">\n      <Input.Text\n        class=\"max-w-sm\"\n        placeholder=\"Filter emails...\"\n        :model-value=\"(table.getColumn('email')?.getFilterValue() as string)\"\n        @update:model-value=\" table.getColumn('email')?.setFilterValue($event)\"\n      />\n      <DropdownMenu.Root>\n        <DropdownMenu.Trigger as-child>\n          <Button variant=\"outline\" class=\"ml-auto\">\n            Columns <ChevronsUpDownIcon class=\"ml-2 size-4\" />\n          </Button>\n        </DropdownMenu.Trigger>\n        <DropdownMenu.Content align=\"end\">\n          <DropdownMenu.CheckboxItem\n            v-for=\"column in table.getAllColumns().filter((column) => column.getCanHide())\"\n            :key=\"column.id\"\n            class=\"capitalize\"\n            :value=\"column.id\"\n            :checked=\"column.getIsVisible()\"\n            @update:checked=\"(value) => {\n              column.toggleVisibility(!!value)\n            }\"\n          >\n            {{ column.id }}\n          </DropdownMenu.CheckboxItem>\n        </DropdownMenu.Content>\n      </DropdownMenu.Root>\n    </div>\n    <div class=\"rounded-md border\">\n      <Table.Root>\n        <Table.Header>\n          <Table.Row v-for=\"headerGroup in table.getHeaderGroups()\" :key=\"headerGroup.id\">\n            <Table.Head v-for=\"header in headerGroup.headers\" :key=\"header.id\">\n              <FlexRender v-if=\"!header.isPlaceholder\" :render=\"header.column.columnDef.header\" :props=\"header.getContext()\" />\n            </Table.Head>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n          <template v-if=\"table.getRowModel().rows?.length\">\n            <template v-for=\"row in table.getRowModel().rows\" :key=\"row.id\">\n              <Table.Row :data-state=\"row.getIsSelected() ? 'selected' : undefined\">\n                <Table.Cell v-for=\"cell in row.getVisibleCells()\" :key=\"cell.id\">\n                  <FlexRender :render=\"cell.column.columnDef.cell\" :props=\"cell.getContext()\" />\n                </Table.Cell>\n              </Table.Row>\n              <Table.Row v-if=\"row.getIsExpanded()\">\n                <Table.Cell :colspan=\"row.getAllCells().length\">\n                  {{ JSON.stringify(row.original) }}\n                </Table.Cell>\n              </Table.Row>\n            </template>\n          </template>\n\n          <Table.Row v-else>\n            <Table.Cell\n              :colspan=\"columns.length\"\n              class=\"h-24 text-center\"\n            >\n              No results.\n            </Table.Cell>\n          </Table.Row>\n        </Table.Body>\n      </Table.Root>\n    </div>\n\n    <div class=\"flex items-center justify-end space-x-2 py-4\">\n      <div class=\"flex-1 text-sm text-muted-foreground\">\n        {{ table.getFilteredSelectedRowModel().rows.length }} of\n        {{ table.getFilteredRowModel().rows.length }} row(s) selected.\n      </div>\n      <div class=\"space-x-2\">\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          :disabled=\"!table.getCanPreviousPage()\"\n          @click=\"table.previousPage()\"\n        >\n          Previous\n        </Button>\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          :disabled=\"!table.getCanNextPage()\"\n          @click=\"table.nextPage()\"\n        >\n          Next\n        </Button>\n      </div>\n    </div>\n  </div>\n</template>\n",
      "type": "registry:block"
    },
    {
      "path": "src/blocks/tanstack-data-table/TanStackTableDropdown.vue",
      "content": "<script setup lang=\"ts\">\nimport { Ellipsis } from 'lucide-vue-next'\n\nimport { Button } from '@/components/ui/button'\nimport { DropdownMenu } from '@/components/ui/dropdown-menu'\n\nimport type { Payment } from './data/payments'\n\nconst props = defineProps<{\n  payment: Payment\n}>()\n\nconst emit = defineEmits(['expand'])\n\nfunction copy(text: string) {\n  navigator.clipboard.writeText(text)\n}\n</script>\n\n<template>\n  <DropdownMenu.Root>\n    <DropdownMenu.Trigger as-child>\n      <Button variant=\"ghost\" class=\"size-8 p-0\">\n        <span class=\"sr-only\">Open menu</span>\n        <Ellipsis class=\"size-4\" />\n      </Button>\n    </DropdownMenu.Trigger>\n    <DropdownMenu.Content>\n      <DropdownMenu.Group>\n        <DropdownMenu.Label>Actions</DropdownMenu.Label>\n        <DropdownMenu.Item value=\"copy-payment\" @click=\"copy(props.payment.id)\">\n          Copy payment ID\n        </DropdownMenu.Item>\n        <DropdownMenu.Item value=\"expand\" @click=\"emit('expand')\">\n          Expand\n        </DropdownMenu.Item>\n      </DropdownMenu.Group>\n      <DropdownMenu.Separator />\n      <DropdownMenu.Group>\n        <DropdownMenu.Item value=\"view-customer\">\n          View customer\n        </DropdownMenu.Item>\n        <DropdownMenu.Item value=\"view-payment\">\n          View payment details\n        </DropdownMenu.Item>\n      </DropdownMenu.Group>\n    </DropdownMenu.Content>\n  </DropdownMenu.Root>\n</template>\n",
      "type": "registry:block"
    },
    {
      "path": "src/blocks/tanstack-data-table/data/payments.ts",
      "content": "export interface Payment {\n  id: string\n  amount: number\n  status: string\n  email: string\n}\n\nconst DATA_COUNT = 45\n\nconst statusOptions = ['succes', 'processingn', 'failed'] as const\n\nfunction getRandomInt(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1)) + min\n}\n\nfunction pickRandom<T>(values: readonly T[]): T {\n  return values[getRandomInt(0, values.length - 1)]!\n}\n\nfunction randomAlphanum(length: number) {\n  const chars = 'abcdefghijklmnopqrstuvwxyz0123456789'\n  let result = ''\n\n  for (let i = 0; i < length; i++)\n    result += chars.charAt(Math.floor(Math.random() * chars.length))\n\n  return result\n}\n\nfunction randomEmail() {\n  const providers = ['gmail.com', 'yahoo.com', 'hotmail.com', 'outlook.com']\n\n  return `${randomAlphanum(8)}@${pickRandom(providers)}`\n}\n\nfunction randomStatus() {\n  return pickRandom(statusOptions)\n}\n\nfunction createRandomPayment(): Payment {\n  return {\n    id: randomAlphanum(8),\n    amount: getRandomInt(100, 999),\n    status: randomStatus(),\n    email: randomEmail(),\n  }\n}\n\nexport function generatePayments(count = 5): Payment[] {\n  return Array.from({ length: count }, () => createRandomPayment())\n}\n\nexport const data: Payment[] = generatePayments(DATA_COUNT)\n",
      "type": "registry:block"
    }
  ],
  "type": "registry:block"
}