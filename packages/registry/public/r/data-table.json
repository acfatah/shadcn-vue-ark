{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "data-table",
  "title": "Data Table",
  "description": "Powerful table and datagrids built using TanStack Table.\n\nReferences:\n- TanStack Table: https://tanstack.com/table/latest/docs/framework/vue/vue-table\n- shadcn/ui: https://ui.shadcn.com/docs/components/data-table",
  "dependencies": [
    "@tanstack/vue-table",
    "@vueuse/core",
    "lucide-vue-next"
  ],
  "registryDependencies": [
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/button.json",
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/dropdown-menu.json",
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/input.json",
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/spinner.json",
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/table.json"
  ],
  "files": [
    {
      "path": "src/components/ui/data-table/DataTable.vue",
      "content": "<script setup lang=\"ts\">\nimport type {\n  ColumnDef,\n  ColumnFiltersState,\n  ColumnSort,\n  RowSelectionState,\n  VisibilityState,\n} from '@tanstack/vue-table'\n\nimport {\n  FlexRender,\n  getCoreRowModel,\n  getFilteredRowModel,\n  getPaginationRowModel,\n  getSortedRowModel,\n  useVueTable,\n} from '@tanstack/vue-table'\nimport { useWindowSize } from '@vueuse/core'\nimport { ChevronsUpDownIcon, Columns3Icon } from 'lucide-vue-next'\nimport { ref } from 'vue'\n\nimport { Button } from '@/components/ui/button'\nimport { DropdownMenu } from '@/components/ui/dropdown-menu'\nimport { Input } from '@/components/ui/input'\nimport { Spinner } from '@/components/ui/spinner'\nimport { Table } from '@/components/ui/table'\n\nimport { valueUpdater } from './utils'\n\nconst props = withDefaults(defineProps<{\n  columns: ColumnDef<any, any>[]\n  data: Record<string, any>[]\n  pagination?: boolean\n  loading?: boolean\n  hideFilter?: boolean\n  hidePagination?: boolean\n}>(), {\n  pagination: true,\n  loading: false,\n  hideFilter: false,\n  hidePagination: false,\n})\n\n// Table state\n// https://tanstack.com/table/latest/docs/api/core/table#state\nconst sorting = ref<ColumnSort[]>([])\nconst columnFilters = ref<ColumnFiltersState>([])\nconst columnVisibility = ref<VisibilityState>({})\nconst rowSelection = ref<RowSelectionState>({})\n\nconst table = useVueTable({\n  get data() { return props.data },\n  get columns() { return props.columns },\n  getCoreRowModel: getCoreRowModel(),\n  getPaginationRowModel: getPaginationRowModel(),\n  getSortedRowModel: getSortedRowModel(),\n  getFilteredRowModel: getFilteredRowModel(),\n  globalFilterFn: 'includesString',\n  onSortingChange: updaterOrValue => valueUpdater(updaterOrValue, sorting),\n  onColumnFiltersChange: updaterOrValue => valueUpdater(updaterOrValue, columnFilters),\n  onColumnVisibilityChange: updaterOrValue => valueUpdater(updaterOrValue, columnVisibility),\n  onRowSelectionChange: updaterOrValue => valueUpdater(updaterOrValue, rowSelection),\n\n  state: {\n    get sorting() { return sorting.value },\n    get columnFilters() { return columnFilters.value },\n    get columnVisibility() { return columnVisibility.value },\n    get rowSelection() { return rowSelection.value },\n  },\n})\n\nconst { width: screenWidth } = useWindowSize()\n</script>\n\n<template>\n  <div>\n    <slot v-if=\"!props.hideFilter\" name=\"filter\" :table=\"table\">\n      <div class=\"flex w-full items-center gap-x-2 py-4\">\n        <Input.Search\n          class=\"\n            w-min max-w-sm\n            sm:w-sm\n          \" placeholder=\"Quick search...\"\n          @update:model-value=\"table.setGlobalFilter(String($event))\"\n        />\n        <DropdownMenu.Root>\n          <DropdownMenu.Trigger as-child>\n            <Button\n              variant=\"outline\"\n              class=\"ml-auto\"\n              :size=\"screenWidth < 640 ? 'icon' : 'md'\"\n            >\n              <span\n                class=\"\n                  hidden\n                  sm:inline\n                \"\n              >Columns</span>\n              <Columns3Icon v-if=\"screenWidth < 640\" class=\"size-4\" aria-hidden=\"true\" />\n              <ChevronsUpDownIcon v-else class=\"ml-2 size-4\" aria-hidden=\"true\" />\n            </Button>\n          </DropdownMenu.Trigger>\n          <DropdownMenu.Content align=\"end\">\n            <DropdownMenu.CheckboxItem\n              v-for=\"column in table.getAllColumns().filter((column) => column.getCanHide())\"\n              :key=\"column.id\"\n              class=\"capitalize\"\n              :checked=\"column.getIsVisible()\"\n              :value=\"column.id\"\n              @update:checked=\"(value) => {\n                column.toggleVisibility(!!value)\n              }\"\n            >\n              {{ column.id }}\n            </DropdownMenu.CheckboxItem>\n          </DropdownMenu.Content>\n        </DropdownMenu.Root>\n      </div>\n    </slot>\n    <div class=\"rounded-md border\">\n      <Table.Root>\n        <Table.Header>\n          <Table.Row v-for=\"headerGroup in table.getHeaderGroups()\" :key=\"headerGroup.id\">\n            <Table.Head v-for=\"header in headerGroup.headers\" :key=\"header.id\">\n              <FlexRender\n                v-if=\"!header.isPlaceholder\" :render=\"header.column.columnDef.header\"\n                :props=\"header.getContext()\"\n              />\n            </Table.Head>\n          </Table.Row>\n        </Table.Header>\n        <Table.Body>\n          <template v-if=\"props.loading\">\n            <Table.Cell :colspan=\"columns.length\" class=\"h-24 text-center\">\n              <Spinner class=\"m-auto size-5\" />\n            </Table.Cell>\n          </template>\n          <template v-else-if=\"table.getRowModel().rows?.length\">\n            <Table.Row\n              v-for=\"row in table.getRowModel().rows\" :key=\"row.id\"\n              :data-state=\"row.getIsSelected() ? 'selected' : undefined\"\n            >\n              <Table.Cell v-for=\"cell in row.getVisibleCells()\" :key=\"cell.id\">\n                <FlexRender :render=\"cell.column.columnDef.cell\" :props=\"cell.getContext()\" />\n              </Table.Cell>\n            </Table.Row>\n          </template>\n          <template v-else>\n            <Table.Row>\n              <Table.Cell :colspan=\"columns.length\" class=\"h-24 text-center\">\n                No results\n              </Table.Cell>\n            </Table.Row>\n          </template>\n        </Table.Body>\n      </Table.Root>\n    </div>\n    <slot v-if=\"!props.hidePagination\" name=\"pagination\" :table=\"table\">\n      <div v-if=\"pagination\" class=\"flex items-center justify-end space-x-2 py-4\">\n        <div\n          class=\"\n            hidden flex-1 text-sm text-muted-foreground\n            sm:block\n          \"\n        >\n          {{ table.getFilteredSelectedRowModel().rows.length }} of\n          {{ table.getFilteredRowModel().rows.length }} row(s) selected.\n        </div>\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          :disabled=\"!table.getCanPreviousPage()\"\n          @click=\"table.previousPage()\"\n        >\n          Previous\n        </Button>\n        <Button\n          variant=\"outline\"\n          size=\"sm\"\n          :disabled=\"!table.getCanNextPage()\"\n          @click=\"table.nextPage()\"\n        >\n          Next\n        </Button>\n      </div>\n    </slot>\n  </div>\n</template>\n",
      "type": "registry:ui"
    },
    {
      "path": "src/components/ui/data-table/index.ts",
      "content": "export { default as DataTable } from './DataTable.vue'\nexport { valueUpdater } from './utils'\n",
      "type": "registry:ui"
    },
    {
      "path": "src/components/ui/data-table/utils.ts",
      "content": "import type { Updater } from '@tanstack/vue-table'\nimport type { Ref } from 'vue'\n\nexport function valueUpdater<T extends Updater<any>>(updaterOrValue: T, ref: Ref) {\n  ref.value\n    = typeof updaterOrValue === 'function'\n      ? updaterOrValue(ref.value)\n      : updaterOrValue\n}\n",
      "type": "registry:ui"
    }
  ],
  "type": "registry:ui"
}