{
  "$schema": "https://ui.shadcn.com/schema/registry-item.json",
  "name": "data-table-custom",
  "title": "Data Table Custom",
  "description": "Data table block with custom filter and pagination slots\nfor richer table controls.\n\nReferences:\n- TanStack Table: https://tanstack.com/table/latest/docs/framework/vue/vue-table\n- shadcn/ui: https://ui.shadcn.com/docs/components/data-table",
  "dependencies": [
    "@tanstack/vue-table",
    "@vueuse/core",
    "lucide-vue-next"
  ],
  "registryDependencies": [
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/button.json",
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/data-table.json",
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/dropdown-menu.json",
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/input.json",
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/select.json",
    "https://raw.githubusercontent.com/acfatah/shadcn-vue-ark/refs/heads/main/packages/registry/public/r/checkbox.json"
  ],
  "files": [
    {
      "path": "src/blocks/data-table-custom/CustomFilterAndPagination.vue",
      "content": "<script setup lang=\"ts\">\nimport {\n  ChevronFirstIcon,\n  ChevronLastIcon,\n  ChevronLeftIcon,\n  ChevronRightIcon,\n  SlidersHorizontalIcon,\n} from 'lucide-vue-next'\nimport { onMounted, ref } from 'vue'\n\nimport { Button } from '@/components/ui/button'\nimport { DataTable } from '@/components/ui/data-table'\nimport { DropdownMenu } from '@/components/ui/dropdown-menu'\nimport { Input } from '@/components/ui/input'\nimport { createListCollection, Select } from '@/components/ui/select'\n\nimport columns from './payment-columns'\n\nconst data = ref<Record<string, any>[]>([])\nconst isLoading = ref(false)\nconst pageSizeOptions = [10, 20, 30, 40, 50]\n\nconst pageSizeCollection = createListCollection<{ label: string, value: string }>({\n  items: pageSizeOptions.map(pageSize => ({\n    label: String(pageSize),\n    value: String(pageSize),\n  })),\n})\n\nfunction getPageSizeModelValue(pageSize: number) {\n  return [String(pageSize)]\n}\n\nfunction handlePageSizeUpdate(\n  value: string[] | undefined,\n  table: {\n    getState: () => { pagination: { pageSize: number } }\n    setPageSize: (pageSize: number) => void\n  },\n) {\n  const nextPageSize = Number(value?.[0] ?? table.getState().pagination.pageSize)\n\n  if (Number.isNaN(nextPageSize)) {\n    return\n  }\n\n  table.setPageSize(nextPageSize)\n}\n\nasync function fetchData() {\n  isLoading.value = true\n\n  const payments = await import('./data/payments.ts').then(m => m.data)\n  await new Promise(resolve => setTimeout(resolve, 1000))\n\n  isLoading.value = false\n\n  return payments\n}\n\nonMounted(async () => {\n  data.value = await fetchData()\n})\n</script>\n\n<template>\n  <DataTable :columns=\"columns\" :data=\"data\" :loading=\"isLoading\">\n    <template #filter=\"{ table }\">\n      <div class=\"flex items-center justify-end py-4\">\n        <Input.Text\n          class=\"ml-auto max-w-sm\" placeholder=\"Filter emails...\"\n          :model-value=\"(table.getColumn('email')?.getFilterValue() as string)\"\n          @update:model-value=\" table.getColumn('email')?.setFilterValue($event)\"\n        />\n        <DropdownMenu.Root>\n          <DropdownMenu.Trigger as-child>\n            <Button variant=\"outline\" class=\"ml-1\">\n              <SlidersHorizontalIcon class=\"size-4\" />\n            </Button>\n          </DropdownMenu.Trigger>\n          <DropdownMenu.Content align=\"end\">\n            <DropdownMenu.CheckboxItem\n              v-for=\"column in table.getAllColumns().filter((column) => column.getCanHide())\"\n              :key=\"column.id\"\n              class=\"capitalize\"\n              :value=\"column.id\"\n              :checked=\"column.getIsVisible()\"\n              @update:checked=\"(value) => {\n                column.toggleVisibility(!!value)\n              }\"\n            >\n              {{ column.id }}\n            </DropdownMenu.CheckboxItem>\n          </DropdownMenu.Content>\n        </DropdownMenu.Root>\n      </div>\n    </template>\n\n    <template #pagination=\"{ table }\">\n      <div\n        class=\"\n          flex items-center justify-between px-0 py-4\n          lg:px-2\n        \"\n      >\n        <div\n          class=\"\n            hidden w-full flex-1 text-sm whitespace-nowrap text-muted-foreground\n            sm:block\n          \"\n        >\n          {{ table.getFilteredSelectedRowModel().rows.length }} of\n          {{ table.getFilteredRowModel().rows.length }} row(s) selected.\n        </div>\n        <div\n          class=\"\n            flex w-full items-center justify-between space-x-6\n            sm:justify-end\n            lg:space-x-8\n          \"\n        >\n          <div class=\"flex items-center space-x-2\">\n            <p\n              class=\"\n                hidden text-sm font-medium whitespace-nowrap\n                sm:flex\n              \"\n            >\n              Rows per page\n            </p>\n            <Select.Root\n              :collection=\"pageSizeCollection\"\n              :model-value=\"getPageSizeModelValue(table.getState().pagination.pageSize)\"\n              @update:model-value=\"(value) => handlePageSizeUpdate(value, table)\"\n            >\n              <Select.Trigger class=\"h-8 w-[70px]\">\n                <Select.ValueText :placeholder=\"`${table.getState().pagination.pageSize}`\" />\n              </Select.Trigger>\n              <Select.Content>\n                <Select.ItemGroup>\n                  <Select.Item\n                    v-for=\"pageSize in pageSizeCollection.items\"\n                    :key=\"pageSize.value\"\n                    :item=\"pageSize\"\n                  >\n                    <Select.ItemText>{{ pageSize.label }}</Select.ItemText>\n                  </Select.Item>\n                </Select.ItemGroup>\n              </Select.Content>\n            </Select.Root>\n          </div>\n          <div class=\"flex w-min items-center justify-center text-sm font-medium whitespace-nowrap\">\n            Page <Input.Number\n              type=\"number\"\n              min=\"1\"\n              class=\"m-1 h-8 w-16 rounded-sm border p-1 text-right\"\n              :max=\"table.getPageCount()\"\n              :default-value=\"String(table.getState().pagination.pageIndex + 1)\"\n              :model-value=\"String(table.getState().pagination.pageIndex + 1)\"\n              @update:model-value=\"Number($event) < table.getPageCount()\n                ? table.setPageIndex(Number($event) - 1)\n                : table.setPageIndex(table.getPageCount() - 1)\n              \"\n            /> of {{ table.getPageCount() }}\n          </div>\n          <div class=\"flex items-center gap-x-2\">\n            <Button\n              variant=\"outline\"\n              class=\"\n                hidden size-8 p-0\n                lg:flex\n              \"\n              :disabled=\"!table.getCanPreviousPage()\"\n              @click=\"table.setPageIndex(0)\"\n            >\n              <span class=\"sr-only\">Go to first page</span>\n              <ChevronFirstIcon class=\"size-4\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              class=\"size-8 p-0\"\n              :disabled=\"!table.getCanPreviousPage()\"\n              @click=\"table.previousPage()\"\n            >\n              <span class=\"sr-only\">Go to previous page</span>\n              <ChevronLeftIcon class=\"size-4\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              class=\"size-8 p-0\"\n              :disabled=\"!table.getCanNextPage()\"\n              @click=\"table.nextPage()\"\n            >\n              <span class=\"sr-only\">Go to next page</span>\n              <ChevronRightIcon class=\"size-4\" />\n            </Button>\n            <Button\n              variant=\"outline\"\n              class=\"\n                hidden size-8 p-0\n                lg:flex\n              \"\n              :disabled=\"!table.getCanNextPage()\"\n              @click=\"table.setPageIndex(table.getPageCount() - 1)\"\n            >\n              <span class=\"sr-only\">Go to last page</span>\n              <ChevronLastIcon class=\"size-4\" />\n            </Button>\n          </div>\n        </div>\n      </div>\n    </template>\n  </DataTable>\n</template>\n",
      "type": "registry:block"
    },
    {
      "path": "src/blocks/data-table-custom/DefaultDataTableDropDown.vue",
      "content": "<script setup lang=\"ts\">\nimport { Ellipsis } from 'lucide-vue-next'\n\nimport { Button } from '@/components/ui/button'\nimport { DropdownMenu } from '@/components/ui/dropdown-menu'\n\nimport type { Payment } from './data/payments'\n\nconst props = defineProps<{\n  payment: Payment\n}>()\n\nfunction copy(text: string) {\n  navigator.clipboard.writeText(text)\n}\n</script>\n\n<template>\n  <DropdownMenu.Root>\n    <DropdownMenu.Trigger as-child>\n      <Button variant=\"ghost\" class=\"size-8 self-end p-0\">\n        <span class=\"sr-only\">Open menu</span>\n        <Ellipsis class=\"size-4\" />\n      </Button>\n    </DropdownMenu.Trigger>\n    <DropdownMenu.Content align=\"end\">\n      <DropdownMenu.Group>\n        <DropdownMenu.Label>Actions</DropdownMenu.Label>\n        <DropdownMenu.Item value=\"copy-payment\" @click=\"copy(props.payment.id)\">\n          Copy payment ID\n        </DropdownMenu.Item>\n      </DropdownMenu.Group>\n      <DropdownMenu.Separator />\n      <DropdownMenu.Group>\n        <DropdownMenu.Item value=\"view-customer\">\n          View customer\n        </DropdownMenu.Item>\n        <DropdownMenu.Item value=\"view-payment\">\n          View payment details\n        </DropdownMenu.Item>\n      </DropdownMenu.Group>\n    </DropdownMenu.Content>\n  </DropdownMenu.Root>\n</template>\n",
      "type": "registry:block"
    },
    {
      "path": "src/blocks/data-table-custom/payment-columns.ts",
      "content": "import type { Component } from 'vue'\n\nimport { createColumnHelper } from '@tanstack/vue-table'\nimport { ChevronsUpDownIcon } from 'lucide-vue-next'\nimport { h } from 'vue'\n\nimport { Button } from '@/components/ui/button'\nimport { Checkbox } from '@/components/ui/checkbox'\n\nimport type { Payment } from './data/payments'\n\nimport DropdownAction from './DefaultDataTableDropDown.vue'\n\nconst columnHelper = createColumnHelper<Payment>()\nconst CheckboxRoot = Checkbox.Root as Component\nconst CheckboxHiddenInput = Checkbox.HiddenInput as Component\nconst CheckboxControl = Checkbox.Control as Component\nconst CheckboxIndicator = Checkbox.Indicator as Component\n\nfunction renderSelectionCheckbox(options: {\n  checked: boolean | 'indeterminate'\n  onUpdate: (value: boolean | 'indeterminate') => void\n  ariaLabel: string\n}) {\n  return h(CheckboxRoot, {\n    'checked': options.checked,\n    'onUpdate:checked': options.onUpdate,\n    'aria-label': options.ariaLabel,\n    'class': 'items-center justify-center gap-0',\n  }, () => [\n    h(CheckboxHiddenInput),\n    h(CheckboxControl, null, () => h(CheckboxIndicator)),\n  ])\n}\n\nexport const columns = [\n  columnHelper.group({\n    id: 'select',\n    header: ({ table }) => renderSelectionCheckbox({\n      checked: table.getIsAllPageRowsSelected()\n        || (table.getIsSomePageRowsSelected() && 'indeterminate'),\n      onUpdate: value => table.toggleAllPageRowsSelected(!!value),\n      ariaLabel: 'Select all',\n    }),\n    cell: ({ row }) => renderSelectionCheckbox({\n      checked: row.getIsSelected(),\n      onUpdate: value => row.toggleSelected(!!value),\n      ariaLabel: 'Select row',\n    }),\n    enableSorting: false,\n    enableHiding: false,\n  }),\n\n  columnHelper.accessor('status', {\n    header: () => 'Status',\n    cell: ({ row }) => h('div', { class: 'capitalize' }, row.getValue('status')),\n  }),\n\n  columnHelper.accessor('email', {\n    header: ({ column }) => {\n      return h(Button, {\n        variant: 'ghost',\n        onClick: () => column.toggleSorting(column.getIsSorted() === 'asc'),\n      }, () => ['Email', h(ChevronsUpDownIcon, { class: 'ml-2 h-4 w-4' })])\n    },\n    cell: ({ row }) => h('div', { class: 'lowercase' }, row.getValue('email')),\n  }),\n\n  columnHelper.accessor('amount', {\n    header: () => h('div', { class: 'text-right' }, 'Amount'),\n    footer: props => props.column.getFacetedUniqueValues().size,\n    cell: ({ row }) => {\n      const amount = Number.parseFloat(row.getValue('amount'))\n\n      const formatted = new Intl.NumberFormat('en-US', {\n        style: 'currency',\n        currency: 'USD',\n      }).format(amount)\n\n      return h('div', { class: 'text-right font-medium' }, formatted)\n    },\n  }),\n\n  columnHelper.display({\n    id: 'actions',\n    enableHiding: false,\n    cell: ({ row }) => h('div', { class: 'flex justify-end' }, h(DropdownAction, {\n      payment: row.original,\n    })),\n  }),\n]\n\nexport default columns\n",
      "type": "registry:block"
    },
    {
      "path": "src/blocks/data-table-custom/data/payments.ts",
      "content": "export interface Payment {\n  id: string\n  amount: number\n  status: string\n  email: string\n}\n\nconst DATA_COUNT = 45\n\nconst statusOptions = ['succes', 'processingn', 'failed'] as const\n\nfunction getRandomInt(min: number, max: number) {\n  return Math.floor(Math.random() * (max - min + 1)) + min\n}\n\nfunction pickRandom<T>(values: readonly T[]): T {\n  return values[getRandomInt(0, values.length - 1)]!\n}\n\nfunction randomAlphanum(length: number) {\n  const chars = 'abcdefghijklmnopqrstuvwxyz0123456789'\n  let result = ''\n\n  for (let i = 0; i < length; i++)\n    result += chars.charAt(Math.floor(Math.random() * chars.length))\n\n  return result\n}\n\nfunction randomEmail() {\n  const providers = ['gmail.com', 'yahoo.com', 'hotmail.com', 'outlook.com']\n\n  return `${randomAlphanum(8)}@${pickRandom(providers)}`\n}\n\nfunction randomStatus() {\n  return pickRandom(statusOptions)\n}\n\nfunction createRandomPayment(): Payment {\n  return {\n    id: randomAlphanum(8),\n    amount: getRandomInt(100, 999),\n    status: randomStatus(),\n    email: randomEmail(),\n  }\n}\n\nexport function generatePayments(count = 5): Payment[] {\n  return Array.from({ length: count }, () => createRandomPayment())\n}\n\nexport const data: Payment[] = generatePayments(DATA_COUNT)\n",
      "type": "registry:block"
    }
  ],
  "type": "registry:block"
}